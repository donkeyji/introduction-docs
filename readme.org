#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="./resource/style.css" />
#+TITLE: 使用 TeXmacs 写作数学文档
#+AUTHOR: zhcosin<zhcosin@163.com>
#+DATE: <2016-11-16 周三>
#+LANGUAGE: zh_CN
#+OPTIONS: author:t

注: 本文在 [[https://github.com/zhcosin/introduction-to-texmacs][这个网页]] 上永久维护，这意味着你现在看到的这份文档可能不是最新的。

* 为什么写这篇文章

目前主流的数学文档写作工具是 word 和 LaTeX，本文推荐使用 TeXmacs 这个软件来完成这项工作。我不能说 TeXmacs 在写作数学文档方面比 word 和 LaTeX 它们强[fn::事实上关于各种工具的比较和争论一直都存在，而且从来不会有个谁优谁劣的共识，所以本文只是简单的列出 TeXmacs 与它们相比的优势和不足，看完本文后你可以作出自己的选择，当然我是希望你能够选择 TeXmacs 的，不然这篇文章写来干嘛呢。]。总而言之，我推荐 TeXmacs 的两个根本理由是下面两条:
- TeXmacs 完全可视化的编辑数学公式（类似于MathType），适合用来打数学草稿(LaTeX不是所见即所得从而不适合这项工作)。
- TeXmacs 适合于那些对 word 不满意，喜欢 LaTeX 排版的数学文档的精美效果但又对写 LaTeX 文档感到不爽的人(LaTeX 的复杂和不爽初学者深有体会)。我想对这些人说：考虑一下 TeXmacs 吧，你可能会喜欢的。

但我要强调的是: *本文所提到的数学文档是不包括书籍的，书籍的排版还是交给 LaTeX 完成比较好* ，TeXmacs 适合写作的数学文档是 *草稿、习题解答、作业、讨论稿、小论文* 这样的篇幅不超过20页的文档。

本文的主要内容是:
1. TeXmacs 与 word 和 LaTeX 这些工具相比，在写作数学文档方面的优势.
2. TeXmacs 写作数学文档的教程， *你基本上无需再看多少的资料，本文即足够* ，本文指定要求阅读的指定文档的指定章节除外（放心，不会超过10页的内容，而且也并非读完才能开始工作G）。

这里放一张我用 TeXmacs 编辑数学文档的演示。

[[./resource/pic/input-math.gif]]

* TeXmacs 介绍

TeXmacs 是一个法国人开发的免费的所见即所得的用来进行科学文档排版的自由软件(这意味着你无需破解无需激活无需关注正版盗版)，目前还不是太流行。它有如下特征:
- 排版精美，数学公式尤其赏心悦目。
- 所见即所得，像 word 一样。
- 源文件是文本文件，也就是用记事本都可以看它的内容，只是没有排版效果。
- 支持导出 pdf 文档。
- 支持导出 LaTeX 文档。

这里是 TeXmacs 官方网站上的一个截图。

[[./resource/pic/offcial-capiture.png]]

* 写作数学文档哪家强
  
** word 之痛
   
经常在 word 中写数学文档的人应该都会体会到如下一些情况:
- 某个阳光灿烂的日子，一觉醒来，公式全部成乱码了，或者干脆变成黑方块。
- 公式效果不如 LaTeX 和 TeXmacs.
- MS office 安装包巨大，动辄两三个G，还得满世界找激活码或者破解工具。
- 要编辑公式，还得额外点出个公式编辑器，编辑出的公式以后还能不能修改都是个问题。
请原谅我只说缺点，不说 word 的优点。

** LaTeX 之殇

与 LaTeX 相比，TeXmacs的优势是:
- 所见即所得，编辑数学公式类似于 MathType 的可视化输入，因而适合边写边演算。而 LaTeX 在编辑的时候你只能在脑海中想象公式的模样。
- 不需要编译，不需要复杂的环境，就一个软件就一切搞定。很多 LaTeX 初学者对 LaTeX 的系统环境和编译排错应该会有深刻的感受。
  
缺点是：
- 对排版的精细程度远不如 LaTeX.
- 编辑长文档比如书籍不怎么好用。
- 绘图不怎么好用。
- 因为不如 TeX/LaTeX 流行，所以与别人交流你需要导出 pdf.

* 如何使用 TeXmacs

** 安装与中文设置
   
好吧，我被你洗脑了，我也决定尝试 TeXmacs，我怎么安装和使用它呢。随便找一个搜索引擎（个人推荐微软家的[[http://cn.bing.com][必应]] ，无需翻墙），搜索 TeXmacs，任意一个正常点的搜索引擎都会把 TeXmacs 的官方网站列在搜索结果第一页的前三条搜索结果内。进入官方网站（全英文的不要担心），首页有个大大的图，图右下角有 Download 字样，点它即进入下载页面，你会在这个页面上看到安装程序的下载链接的。安装过程都是傻瓜式安装，无需多言。

如果你打开软件发现是全英文界面也不要担心，菜单【Edit】-> 【Preferences...】 会弹出一个对话框，在 "User interface language" 右边的下拉框中，点选 "Chinese" 项，然后你会看到，关闭对话框（没有保存按钮）后你就会看到菜单栏都变成中文了。

** 基本使用
   
对于一般的数学文档而言，其结构无非是由各级标题组织来的，点开【插入】菜单，你会一目了然，其中【数学】子菜单中有行内公式，单行公式，多行公式可以选择。(我这里这三个子项仍然是英文的，而且后两个子项的快捷键也没有效果，可能是文档没有更新)。

** 数学公式与公式环境
   
首先建议先阅读软件自带的帮助文档中关于数学公式的部分（中文的）。

我这里推荐使用 LaTeX 代码来快速输入数学公式，正如本文最前面的一个图中所演示的那样，你可以看到我对于分式、求和、上下标这些都是直接输入 LaTeX 代码的，在输入过程中以一对美元符$来括起行内公式(按下第一个美元符光标会变为蓝色，意即进入公式编辑状态，输完公式后再按一下美元符或者使用右方向箭光标变为红色接着输入文本)。

这里简单说明下一般结构的输入，以下都是在公式编辑状态下。

要输入上标，你只要输入一个 ^ 符号，就会看到光标跳到前一个符号的右上肩上，输入你的上标内容，然后按右方向箭接着输后面的内容。而下标是输入一个下划线 _，其它操作与上标完全一样。

要输入分式，LaTeX 的分式代码是 \frac{分子}{分母}，而在 TeXmacs 中你不必输入那两对花括号，输入 \frac 之后直接回车，会出现分式线和分子与分母的方框，使用上下光标键分别进入那两个方框输入分子和分母的内容，输完后按右方向箭接着输入分式后面的内容。

关于希腊字母及各种数学符号的输入我就不一一列举了，基本上都跟 LaTeX 一模一样，所以我在本文件同目录下放上了《一份不太简短的 LaTeX2e 介绍》一书，你只要查阅书中数学公式那一章下面的“数学公式的基本元素”和“数学符号表”这两小节的内容，加起来不超过十页，而且那个符号表是用的时候来查，无需记住。

** 导出 pdf 或者 LaTeX 文档
   
你写完了文档，要给别人分享，但别人没有 TeXmacs 怎么办，那就导出 pdf 文档，你自己把 tm 格式的源文档保存好就好了，要修改随时可以修改源文件，这就是它不如 word 的地方，word 是有文档就能修改，别人却无法修改你的 pdf 文件，如果你自己弄丢了 tm 格式的源文件，你就只有哭的份了。

你的数学文档通常需要长期积累，天长日久之后，你可能希望把它们整理出来，作成一本书或者其它类型的长文档，这时就需要 LaTeX 来制作书籍了，你也无需担心，因为 TeXmacs 能导出 LaTeX 格式的源文件(tex文件），既然是自动生成的代码嘛，其质量肯定是不如手工写的，但既然你都能用 LaTeX 写书了，调整一下 TeXmacs 生成的代码应该也不在话下吧。

** TeXmacs 的其它有用的功能
   
TeXmacs 还有其它一些有用的功能，比如它可以作为一个前端，对其它交互式软件的输出结果进行排版，如下是在其中调用 maxima (一个代数系统，类似于 Mathematics) 并对其结果进行排版。

[[./resource/pic/texmacs-maxima.jpg]]

* 相关资料和链接

- [[http://texmacs.org][TeXmacs 官网]]
- [[http://www.yinwang.org/blog-cn/2012/09/18/texmacs][王垠对 TeXmacs 的介绍]]
- [[https://github.com/zhcosin/introduction-to-texmacs][本文的网页版]]

* FAQ(常见问题)

1. win 10 下的 TeXmacs 频繁崩溃是什么情况?
答：windows 10 系统比较新，TeXmacs 可能还需要对它的一个适应期，所以不建议使用 windows 10 系统。
